$(document).ready(function(){$('input[name="subject"] , #contact_form input[name=tel]').keydown(function(e){46==e.keyCode||8==e.keyCode||9==e.keyCode||27==e.keyCode||13==e.keyCode||65==e.keyCode&&e.ctrlKey===!0||e.keyCode>=35&&e.keyCode<=39||(e.shiftKey||(e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105))&&e.preventDefault()}),$(function(){function e(){var e=$("#contact_form"),t=0;return e.find("input").each(function(){""==$(this).val()?$(this).css("border","1px solid #c22d28"):($(this).css("border","none"),t+=1)}),t===e.find("input").length?!0:void 0}$("#contact_form .button").on("click",function(){return e()&&($("#contact_form").before('<h3 id="contact_form_info">Оформление заявки. Подождите...</h3>'),$("#contact_form").hide(),order_url=$("#contact_form").attr("action"),$.post(order_url,{name:$("#contact_form input[name=name]").val(),tel:$("#contact_form input[name=tel]").val(),message:$("#contact_form textarea[name=message]").val(),send:"1"},function(e){$("#contact_form").html(e),$("#contact_form").html(e),$("#contact_form").show(),$("#contact_form_info").remove()},"html")),!1})}),$(function(){$("[data-order-call]").click(function(){$("#popup").fadeIn(),$("#popup").append('<a id="popup_close"></a>');var e=$("#popup").outerWidth()/-2,t=$("#popup").outerHeight()/-2;return $("#popup").css({"margin-left":e,"margin-top":t}),$("body").append('<div id="fade"></div>'),$("#fade").css({filter:"alpha(opacity=40)"}).fadeIn(),!1}),$(document.body).on("click","#popup_close, #fade",function(){$("#fade").fadeOut(function(){$("#fade").remove(),$("#popup_close").remove(),$("#popup").fadeOut()})})}),$("#ajaxform").submit(function(){function e(e){var t=/^([a-z0-9_\.-])+@[a-z0-9-]+\.([a-z]{2,8}\.)?[a-z]{2,8}$/i;return t.test(e)?!0:!1}var t=$(this),o=!1;if(t.find("input, textarea").css("border","1px solid #ccc"),t.find("input").each(function(){""==$(this).val()&&($(this).css("border","1px solid #c22d28"),o=!0)}),""!==$("input[name='email']").val()){var n=$("input[name='email']").val();e(n)?$("input[name='email']").css("border","1px solid #ccc"):($("input[name='email']").css("border","1px solid #c22d28"),o=!0)}if(!o){var a=t.serialize();t.find("input , textarea").each(function(){$(this).val("")}),$.ajax({type:"POST",url:"email.php",dataType:"json",data:a,beforeSend:function(e){t.find('input[type="submit"]').attr("disabled","disabled")},success:function(e){e.error?alert(e.error):alert("Письмo oтврaвлeнo! Мы свяжемся с вами в ближайшее время.")},error:function(e,t,o){alert(e.status),alert(o)},complete:function(e){t.find('input[type="submit"]').prop("disabled",!1)}})}return!1})});